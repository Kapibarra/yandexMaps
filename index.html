<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style type="text/css">
      html,
      body {
        width: 100%;
        padding: 0;
        margin: 0;
        font-family: Arial;
      }
      ul {
        padding-inline-start: 10px !important;
      }
      #map {
        width: 100%;
        height: 450px;
        max-width: 800px;
        box-sizing: border-box;
        padding: 15px;
        background: #ffffff;
        box-shadow: 0px 8px 30px rgba(0, 0, 0, 0.05);
        border-radius: 10px;
      }
      /* Оформление меню (начало)*/
      .menu {
        list-style: none;
        box-sizing: border-box;
        padding: 15px;
        background: #ffffff;
        box-shadow: 0px 8px 30px rgba(0, 0, 0, 0.05);
        border-radius: 10px;
        max-height: 450px;
        overflow-y: scroll;
        margin-block-start: 0em !important;
        margin-block-end: 0em !important;
      }
      .menu__li {
        margin-bottom: 15px;
        min-height: 100px;
      }
      .menu li a {
        text-decoration: none;
        height: 50px;
        display: block !important;
      }
      .menu__item {
        text-decoration: none;
        text-transform: uppercase;
        font-size: 16px;
        font-weight: 600;
        color: #030303;
        box-sizing: border-box;
        margin-bottom: 15px;
        line-height: 130%;
      }
      .submenu {
        list-style: none;
        margin: 0 0 0 20px;
        padding: 0;
      }
      .submenu li {
        height: 35px;
      }
      .submenu li a {
        font-size: 90%;
        font-weight: 300;
        width: 100%;
        height: 100%;
        color: #383838;
        background: #f6f7f8;
        box-sizing: border-box;
        padding: 5px 10px;
        border-radius: 5px;
        border: 1px solid #383838;
        transition: all 0.3s ease-in-out;
        height: 30px;
        box-shadow: 0px 8px 30px rgba(0, 0, 0, 0.05);
      }
      .submenu li a:hover {
        transition: all 0.3s ease-in-out;
        background: #e6e6e6;
      }
      .map__wrapper {
        display: flex;
        flex-direction: row;
        flex-direction: row-reverse;
        justify-content: center;
        width: 100%;
        flex-wrap: nowrap;
        max-width: 1200px;
        margin: 0 auto;
        margin-top: 20px;
        gap: 20px;
      }
      .ymaps-2-1-79-balloon-content__footer {
        display: block;
        margin: 5px 0 0;
        color: #777;
        font-size: 130% !important;
      }
      .ymaps-2-1-79-balloon-content__header {
        display: block;
        margin: 0 0 5px;
        font-size: 120%;
        font-weight: 700;
      }
      ::-webkit-scrollbar {
        width: 12px;
      }

      /* Track */
      ::-webkit-scrollbar-track {
        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1);
        -webkit-border-radius: 3px;
        border-radius: 3px;
      }

      /* Handle */
      ::-webkit-scrollbar-thumb {
        -webkit-border-radius: 13px;
        border-radius: 13px;
        background: #e31235;
        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1);
      }
      ::-webkit-scrollbar-thumb:window-inactive {
        background: rgba(255, 0, 0, 0.4);
      }
      /* Оформление меню (конец)*/
    </style>
  </head>
  <body>
    <div class="map__wrapper">
      <div id="map"></div>
    </div>
    <script
      src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=<ваш API-ключ>"
      type="text/javascript"
    ></script>
    <script
      src="https://yandex.st/jquery/2.2.3/jquery.min.js"
      type="text/javascript"
    ></script>
    <script>
      var groups = [
        {
          name: "Центральный и северо-западный федеральный округ",
          style: "islands#greenIcon",
          iconColor: "#735184",
          items: [
            {
              center: [55.701176, 37.655481],
              name: 'ООО "ТЕХНОГРУПП"',
              footer:
                '<a href="tel:+74951440446">+7 (495) 144-04-46<a/> <br/> <a href="mailto:info@techno-grup.ru">info@techno-grup.ru<a/> <br/> <a href="https://техно-груп.рф/" target="blank">техно-груп.рф/<a/>',
              header: 'ООО "ТЕХНОГРУПП"',
              body: '<img src="https://static.tildacdn.com/tild3836-3039-4337-b864-643464386164/Group_4378.png" height="40" width="230"> <br/> 108814 г. Москва , п.Сосенское, Калужское шоссе, 24-й км, вл.1, стр.1, БЦ "Высота"',
            },
            {
              center: [55.576711, 37.623447],
              name: 'ООО "СИМП-ТЕХНО"',
              footer:
                '<a href="tel:+74955329529">8 (495) 532-95-29<a/> <br/> <a href="tel:+79296790050">8 (929) 679-00-50<a/> <br/> <a href="mailto:nilfisk@bk.ru">nilfisk@bk.ru<a/>',
              header: 'ООО "СИМП-ТЕХНО"',
              body: ' <img src="https://static.tildacdn.com/tild3836-3039-4337-b864-643464386164/Group_4378.png" height="40" width="230"> <br/> 117403, г.Москва, проезд Востряковский, д. 10Б, стр.1',
            },
            {
              center: [55.706822, 37.711042],
              name: 'ООО "АКВАМАТИКА"',
              footer:
                '<a href="tel:+74954779674">8 (495) 477-96-74<a/> <br/> <a href="mailto:info@eterial.com">info@eterial.com<a/> <br/> <a href="https://www.eterial.com/" target="blank">www.eterial.com/<a/>',
              header: 'ООО "АКВАМАТИКА"',
              body: ' <img src="https://static.tildacdn.com/tild3836-3039-4337-b864-643464386164/Group_4378.png" height="40" width="230"> <br/>109548 г.Москва, Шоссейный проезд, д.6, стр.7',
            },
            {
              center: [55.775606, 37.503855],
              name: 'ООО "ФЛИТСЕРВИС Ко"',
              footer:
                '<a href="tel:+79257712633">8 (925) 771-26-33<a/> <br/> <a href="tel:+74957410871">8 (495) 741-08-71<a/> <br/> <a href="tel:+74957410869">8 (495) 741-08-69<a/> <br/> <a href="mailto:info@fleetservice.ru">info@fleetservice.ru<a/> <br/> <a href="https://fleetservice.ru/" target="blank">fleetservice.ru//<a/>',
              header: 'ООО "ФЛИТСЕРВИС Ко"',
              body: '<img src="https://static.tildacdn.com/tild3836-3039-4337-b864-643464386164/Group_4378.png" height="40" width="230"> <br/> 123308, г.Москва, ул.Мнёвники, д.1',
            },
            {
              center: [55.85628, 38.433377],
              name: 'ООО "УСПЕХ"',
              footer:
                '<a href="tel:+79168091473">8 (916) 809-14-73<a/> <br/><a href="mailto:vldubov@mail.ru">vldubov@mail.ru<a/>',
              header: 'ООО "УСПЕХ"',
              body: '<img src="https://static.tildacdn.com/tild3836-3039-4337-b864-643464386164/Group_4378.png" height="40" width="230"> <br/>  142400, Московская область, г. Ногинск, ул. Рабочая, д. 46 "а", офис 12',
            },
            {
              center: [59.712444, 30.624251],
              name: "ИП ИВАНОВ С. А.",
              footer:
                '<a href="tel:+79627280771">8 (962) 728-07-71<a/> <br/> <a href="tel:+79213501057">8 (921) 350-10-57<a/> <br/> <a href="mailto:info@mrzipo19.ru">info@mrzipo19.ru<a/>',
              header: "ИП ИВАНОВ С. А.",
              body: '<img src="https://static.tildacdn.com/tild3836-3039-4337-b864-643464386164/Group_4378.png" height="40" width="230"> <br/> 187032, Ленинградская область, пос. Тельмана, Красноборская дорога д. 2 пом. 22/К',
            },
          ],
        },
        {
          name: "Покушайки",
          style: "islands#greenIcon",
          items: [
            {
              center: [55.701176, 39.655481],
              name: "2-й Кожуховский проезд, 12с11",
            },
          ],
        },

        {
          name: "Belarus>",
          style: "islands#blueIcon",
          items: [
            {
              center: [53.878044, 27.412441],
              name: "УП ТЕХНОГРУПП",
            },
            {
              center: [53.878044, 27.412441],
              name: "&quot;Дом с химерами&quot;",
            },
            {
              center: [53.878044, 27.412441],
              name: "Дом Рыцаря",
            },
          ],
        },
      ];
      ymaps.ready(init);

      function init() {
        // Создание экземпляра карты.
        var myMap = new ymaps.Map(
            "map",
            {
              center: [50.443705, 30.530946],
              zoom: 10,
            },
            {
              searchControlProvider: "yandex#search",
            }
          ),
          // Контейнер для меню.
          menu = $('<ul class="menu"/>');

        for (var i = 0, l = groups.length; i < l; i++) {
          createMenuGroup(groups[i]);
        }

        function createMenuGroup(group) {
          // Пункт меню.
          var menuItem = $(
              '<li class="menu__li"><a href="#" class="menu__item">' +
                group.name +
                "</a></li>"
            ),
            // Коллекция для геообъектов группы.
            collection = new ymaps.GeoObjectCollection(null, {
              preset: group.style,
            }),
            // Контейнер для подменю.
            submenu = $('<ul class="submenu"/>');

          // Добавляем коллекцию на карту.
          myMap.geoObjects.add(collection);
          // Добавляем подменю.
          menuItem
            .append(submenu)
            // Добавляем пункт в меню.
            .appendTo(menu)
            // По клику удаляем/добавляем коллекцию на карту и скрываем/отображаем подменю.
            .find("a")
            .bind("click", function () {
              if (collection.getParent()) {
                myMap.geoObjects.remove(collection);
                submenu.hide();
              } else {
                myMap.geoObjects.add(collection);
                submenu.show();
              }
            });
          for (var j = 0, m = group.items.length; j < m; j++) {
            createSubMenu(group.items[j], collection, submenu);
          }
        }
        myPlacemark = new ymaps.Placemark([55.907228, 31.260503], {
          // Чтобы балун и хинт открывались на метке, необходимо задать ей определенные свойства.
          balloonContentHeader: "Балун метки",
          balloonContentBody: "Содержимое <em>балуна</em> метки",
          balloonContentFooter: "Подвал",
          hintContent: "Хинт метки",
        });
        function createSubMenu(item, collection, submenu) {
          // Пункт подменю.
          var submenuItem = $('<li><a href="#">' + item.name + "</a></li>"),
            // Создаем метку.
            placemark = new ymaps.Placemark(item.center, {
              balloonContent: item.name,
              balloonContentBody: item.body,
              balloonContentHeader: item.header,
              balloonContentFooter: item.footer,
            });

          // Добавляем метку в коллекцию.
          collection.add(placemark);
          // Добавляем пункт в подменю.
          submenuItem
            .appendTo(submenu)
            // При клике по пункту подменю открываем/закрываем баллун у метки.
            .find("a")
            .bind("click", function () {
              if (!placemark.balloon.isOpen()) {
                placemark.balloon.open();
              } else {
                placemark.balloon.close();
              }
              return false;
            });
        }

        // Добавляем меню в тэг BODY.
        menu.appendTo($(".map__wrapper"));
        // Выставляем масштаб карты чтобы были видны все группы.
        myMap.setBounds(myMap.geoObjects.getBounds());
      }
    </script>
  </body>
</html>
