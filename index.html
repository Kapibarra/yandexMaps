<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script
      src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=<ваш API-ключ>"
      type="text/javascript"
    ></script>
    <script
      src="https://yandex.st/jquery/2.2.3/jquery.min.js"
      type="text/javascript"
    ></script>
    <style type="text/css">
      html,
      body {
        width: 100%;
        padding: 0;
        margin: 0;
        font-family: Arial;
      }

      #map {
        width: 100%;
        height: 450px;
        max-width: 800px;
        box-sizing: border-box;
        padding: 15px;
        background: #ffffff;
        box-shadow: 0px 8px 30px rgba(0, 0, 0, 0.05);
        border-radius: 10px;
      }
      /* Оформление меню (начало)*/
      .menu {
        list-style: none;
        box-sizing: border-box;
        padding: 15px;
        background: #ffffff;
        box-shadow: 0px 8px 30px rgba(0, 0, 0, 0.05);
        border-radius: 10px;
        margin: 0;
        max-height: 450px;
        overflow-y: scroll;
      }
      .submenu {
        list-style: none;

        margin: 0 0 0 20px;
        padding: 0;
      }
      .submenu li {
        font-size: 90%;
      }
      .map__wrapper {
        display: flex;
        flex-direction: row;
        flex-direction: row-reverse;
        justify-content: center;
        width: 100%;
        flex-wrap: nowrap;
        max-width: 1200px;
        margin: 0 auto;
        gap: 20px;
      }
      ::-webkit-scrollbar {
        width: 12px;
      }

      /* Track */
      ::-webkit-scrollbar-track {
        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1);
        -webkit-border-radius: 3px;
        border-radius: 3px;
      }

      /* Handle */
      ::-webkit-scrollbar-thumb {
        -webkit-border-radius: 3px;
        border-radius: 3px;
        background: rgba(255, 0, 0, 0.8);
        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.1);
      }
      ::-webkit-scrollbar-thumb:window-inactive {
        background: rgba(255, 0, 0, 0.4);
      }
      /* Оформление меню (конец)*/
    </style>
  </head>
  <body>
    <div class="map__wrapper">
      <div id="map"></div>
    </div>

    <script>
      var groups = [
        {
          name: "Center",
          style: "islands#redIcon",
          items: [
            {
              center: [55.701176, 37.655481],
              name: "2-й Кожуховский проезд, 12с11",
            },
            {
              center: [55.701176, 37.655481],
              name: "2-й Кожуховский проезд, 12с11",
            },
            {
              center: [55.701176, 37.655481],
              name: "2-й Кожуховский проезд, 12с11",
            },
          ],
        },
        {
          name: "Покушайки",
          style: "islands#greenIcon",
          items: [
            {
              center: [55.701176, 37.655481],
              name: "2-й Кожуховский проезд, 12с11",
            },
            {
              center: [55.701176, 37.655481],
              name: "2-й Кожуховский проезд, 12с11",
            },
            {
              center: [55.701176, 37.655481],
              name: "2-й Кожуховский проезд, 12с11",
            },
            {
              center: [55.701176, 37.655481],
              name: "2-й Кожуховский проезд, 12с11",
            },
          ],
        },

        {
          name: "Belarus>",
          style: "islands#blueIcon",
          items: [
            {
              center: [53.878044, 27.412441],
              name: "УП ТЕХНОГРУПП",
            },
            {
              center: [53.878044, 27.412441],
              name: "&quot;Дом с химерами&quot;",
            },
            {
              center: [53.878044, 27.412441],
              name: "Дом Рыцаря",
            },
          ],
        },
      ];
      ymaps.ready(init);

      function init() {
        // Создание экземпляра карты.
        var myMap = new ymaps.Map(
            "map",
            {
              center: [50.443705, 30.530946],
              zoom: 12,
            },
            {
              searchControlProvider: "yandex#search",
            }
          ),
          // Контейнер для меню.
          menu = $('<ul class="menu"/>');

        for (var i = 0, l = groups.length; i < l; i++) {
          createMenuGroup(groups[i]);
        }

        function createMenuGroup(group) {
          // Пункт меню.
          var menuItem = $('<li><a href="#">' + group.name + "</a></li>"),
            // Коллекция для геообъектов группы.
            collection = new ymaps.GeoObjectCollection(null, {
              preset: group.style,
            }),
            // Контейнер для подменю.
            submenu = $('<ul class="submenu"/>');

          // Добавляем коллекцию на карту.
          myMap.geoObjects.add(collection);
          // Добавляем подменю.
          menuItem
            .append(submenu)
            // Добавляем пункт в меню.
            .appendTo(menu)
            // По клику удаляем/добавляем коллекцию на карту и скрываем/отображаем подменю.
            .find("a")
            .bind("click", function () {
              if (collection.getParent()) {
                myMap.geoObjects.remove(collection);
                submenu.hide();
              } else {
                myMap.geoObjects.add(collection);
                submenu.show();
              }
            });
          for (var j = 0, m = group.items.length; j < m; j++) {
            createSubMenu(group.items[j], collection, submenu);
          }
        }

        function createSubMenu(item, collection, submenu) {
          // Пункт подменю.
          var submenuItem = $('<li><a href="#">' + item.name + "</a></li>"),
            // Создаем метку.
            placemark = new ymaps.Placemark(item.center, {
              balloonContent: item.name,
            });

          // Добавляем метку в коллекцию.
          collection.add(placemark);
          // Добавляем пункт в подменю.
          submenuItem
            .appendTo(submenu)
            // При клике по пункту подменю открываем/закрываем баллун у метки.
            .find("a")
            .bind("click", function () {
              if (!placemark.balloon.isOpen()) {
                placemark.balloon.open();
              } else {
                placemark.balloon.close();
              }
              return false;
            });
        }

        // Добавляем меню в тэг BODY.
        menu.appendTo($(".map__wrapper"));
        // Выставляем масштаб карты чтобы были видны все группы.
        myMap.setBounds(myMap.geoObjects.getBounds());
      }
    </script>
  </body>
</html>
